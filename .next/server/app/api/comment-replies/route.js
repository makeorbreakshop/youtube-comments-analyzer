"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/comment-replies/route";
exports.ids = ["app/api/comment-replies/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcomment-replies%2Froute&page=%2Fapi%2Fcomment-replies%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcomment-replies%2Froute.ts&appDir=%2FUsers%2Fbrandoncullum%2Fcommenter%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbrandoncullum%2Fcommenter&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcomment-replies%2Froute&page=%2Fapi%2Fcomment-replies%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcomment-replies%2Froute.ts&appDir=%2FUsers%2Fbrandoncullum%2Fcommenter%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbrandoncullum%2Fcommenter&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_brandoncullum_commenter_app_api_comment_replies_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/comment-replies/route.ts */ \"(rsc)/./app/api/comment-replies/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/comment-replies/route\",\n        pathname: \"/api/comment-replies\",\n        filename: \"route\",\n        bundlePath: \"app/api/comment-replies/route\"\n    },\n    resolvedPagePath: \"/Users/brandoncullum/commenter/app/api/comment-replies/route.ts\",\n    nextConfigOutput,\n    userland: _Users_brandoncullum_commenter_app_api_comment_replies_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/comment-replies/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjb21tZW50LXJlcGxpZXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmNvbW1lbnQtcmVwbGllcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmNvbW1lbnQtcmVwbGllcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmJyYW5kb25jdWxsdW0lMkZjb21tZW50ZXIlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGYnJhbmRvbmN1bGx1bSUyRmNvbW1lbnRlciZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDZTtBQUM1RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3lvdXR1YmUtY29tbWVudHMtYW5hbHl6ZXIvPzk4ZDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2JyYW5kb25jdWxsdW0vY29tbWVudGVyL2FwcC9hcGkvY29tbWVudC1yZXBsaWVzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jb21tZW50LXJlcGxpZXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jb21tZW50LXJlcGxpZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NvbW1lbnQtcmVwbGllcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9icmFuZG9uY3VsbHVtL2NvbW1lbnRlci9hcHAvYXBpL2NvbW1lbnQtcmVwbGllcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY29tbWVudC1yZXBsaWVzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcomment-replies%2Froute&page=%2Fapi%2Fcomment-replies%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcomment-replies%2Froute.ts&appDir=%2FUsers%2Fbrandoncullum%2Fcommenter%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbrandoncullum%2Fcommenter&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/comment-replies/route.ts":
/*!******************************************!*\
  !*** ./app/api/comment-replies/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./lib/supabase.ts\");\n/* harmony import */ var _lib_youtube__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/youtube */ \"(rsc)/./lib/youtube.ts\");\n\n\n\nasync function GET(request) {\n    const searchParams = request.nextUrl.searchParams;\n    const commentId = searchParams.get(\"commentId\");\n    console.log(`üîÑ API: Fetching replies for comment ID: ${commentId}`);\n    if (!commentId) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Comment ID is required\"\n        }, {\n            status: 400\n        });\n    }\n    try {\n        // 1. Get this specific parent comment\n        const { data: parentComment, error: parentError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"comments\").select(\"*\").eq(\"comment_id\", commentId).single();\n        if (parentError || !parentComment) {\n            console.error(\"‚ùå Parent comment not found:\", commentId);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Parent comment not found\",\n                replies: [],\n                count: 0\n            }, {\n                status: 404\n            });\n        }\n        console.log(`‚úÖ Found parent comment: ${parentComment.comment_id}`);\n        // 2. Fetch all replies for this comment\n        const { data: replies, error: repliesError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"comments\").select(\"*\").eq(\"parent_id\", commentId).order(\"published_at\", {\n            ascending: true\n        });\n        if (repliesError) {\n            console.error(\"‚ùå Error fetching replies:\", repliesError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: repliesError.message\n            }, {\n                status: 500\n            });\n        }\n        console.log(`üìä Found ${replies?.length || 0} replies for comment ${commentId}`);\n        // Log the first few replies to help debug\n        if (replies && replies.length > 0) {\n            replies.slice(0, 3).forEach((reply, i)=>{\n                console.log(`Reply ${i + 1}: ID=${reply.comment_id}, Parent=${reply.parent_id}, Text=${reply.text.substring(0, 50)}...`);\n            });\n        }\n        // Transform the comments to frontend format\n        const formattedReplies = replies?.map(_lib_youtube__WEBPACK_IMPORTED_MODULE_2__.mapDbCommentToCommentData) || [];\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            replies: formattedReplies,\n            count: formattedReplies.length\n        });\n    } catch (error) {\n        console.error(\"‚ùå Server error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NvbW1lbnQtcmVwbGllcy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdEO0FBQ2Q7QUFDZ0I7QUFFbkQsZUFBZUcsSUFBSUMsT0FBb0I7SUFDNUMsTUFBTUMsZUFBZUQsUUFBUUUsT0FBTyxDQUFDRCxZQUFZO0lBQ2pELE1BQU1FLFlBQVlGLGFBQWFHLEdBQUcsQ0FBQztJQUVuQ0MsUUFBUUMsR0FBRyxDQUFDLENBQUMseUNBQXlDLEVBQUVILFVBQVUsQ0FBQztJQUVuRSxJQUFJLENBQUNBLFdBQVc7UUFDZCxPQUFPUCxxREFBWUEsQ0FBQ1csSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBeUIsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDOUU7SUFFQSxJQUFJO1FBQ0Ysc0NBQXNDO1FBQ3RDLE1BQU0sRUFBRUMsTUFBTUMsYUFBYSxFQUFFSCxPQUFPSSxXQUFXLEVBQUUsR0FBRyxNQUFNZixtREFBUUEsQ0FDL0RnQixJQUFJLENBQUMsWUFDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxjQUFjWixXQUNqQmEsTUFBTTtRQUVULElBQUlKLGVBQWUsQ0FBQ0QsZUFBZTtZQUNqQ04sUUFBUUcsS0FBSyxDQUFDLCtCQUErQkw7WUFDN0MsT0FBT1AscURBQVlBLENBQUNXLElBQUksQ0FBQztnQkFDdkJDLE9BQU87Z0JBQ1BTLFNBQVMsRUFBRTtnQkFDWEMsT0FBTztZQUNULEdBQUc7Z0JBQUVULFFBQVE7WUFBSTtRQUNuQjtRQUVBSixRQUFRQyxHQUFHLENBQUMsQ0FBQyx3QkFBd0IsRUFBRUssY0FBY1EsVUFBVSxDQUFDLENBQUM7UUFFakUsd0NBQXdDO1FBQ3hDLE1BQU0sRUFBRVQsTUFBTU8sT0FBTyxFQUFFVCxPQUFPWSxZQUFZLEVBQUUsR0FBRyxNQUFNdkIsbURBQVFBLENBQzFEZ0IsSUFBSSxDQUFDLFlBQ0xDLE1BQU0sQ0FBQyxLQUNQQyxFQUFFLENBQUMsYUFBYVosV0FDaEJrQixLQUFLLENBQUMsZ0JBQWdCO1lBQUVDLFdBQVc7UUFBSztRQUUzQyxJQUFJRixjQUFjO1lBQ2hCZixRQUFRRyxLQUFLLENBQUMsNkJBQTZCWTtZQUMzQyxPQUFPeEIscURBQVlBLENBQUNXLElBQUksQ0FBQztnQkFBRUMsT0FBT1ksYUFBYUcsT0FBTztZQUFDLEdBQUc7Z0JBQUVkLFFBQVE7WUFBSTtRQUMxRTtRQUVBSixRQUFRQyxHQUFHLENBQUMsQ0FBQyxTQUFTLEVBQUVXLFNBQVNPLFVBQVUsRUFBRSxxQkFBcUIsRUFBRXJCLFVBQVUsQ0FBQztRQUUvRSwwQ0FBMEM7UUFDMUMsSUFBSWMsV0FBV0EsUUFBUU8sTUFBTSxHQUFHLEdBQUc7WUFDakNQLFFBQVFRLEtBQUssQ0FBQyxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxDQUFDQyxPQUFPQztnQkFDbEN2QixRQUFRQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUVzQixJQUFFLEVBQUUsS0FBSyxFQUFFRCxNQUFNUixVQUFVLENBQUMsU0FBUyxFQUFFUSxNQUFNRSxTQUFTLENBQUMsT0FBTyxFQUFFRixNQUFNRyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDO1lBQ3ZIO1FBQ0Y7UUFFQSw0Q0FBNEM7UUFDNUMsTUFBTUMsbUJBQW1CZixTQUFTZ0IsSUFBSW5DLG1FQUF5QkEsS0FBSyxFQUFFO1FBRXRFLE9BQU9GLHFEQUFZQSxDQUFDVyxJQUFJLENBQUM7WUFDdkJVLFNBQVNlO1lBQ1RkLE9BQU9jLGlCQUFpQlIsTUFBTTtRQUNoQztJQUNGLEVBQUUsT0FBT2hCLE9BQU87UUFDZEgsUUFBUUcsS0FBSyxDQUFDLG1CQUFtQkE7UUFDakMsT0FBT1oscURBQVlBLENBQUNXLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXdCLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQzdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95b3V0dWJlLWNvbW1lbnRzLWFuYWx5emVyLy4vYXBwL2FwaS9jb21tZW50LXJlcGxpZXMvcm91dGUudHM/MjdkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICdAL2xpYi9zdXBhYmFzZSc7XG5pbXBvcnQgeyBtYXBEYkNvbW1lbnRUb0NvbW1lbnREYXRhIH0gZnJvbSAnQC9saWIveW91dHViZSc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3Qgc2VhcmNoUGFyYW1zID0gcmVxdWVzdC5uZXh0VXJsLnNlYXJjaFBhcmFtcztcbiAgY29uc3QgY29tbWVudElkID0gc2VhcmNoUGFyYW1zLmdldCgnY29tbWVudElkJyk7XG4gIFxuICBjb25zb2xlLmxvZyhg8J+UhCBBUEk6IEZldGNoaW5nIHJlcGxpZXMgZm9yIGNvbW1lbnQgSUQ6ICR7Y29tbWVudElkfWApO1xuICBcbiAgaWYgKCFjb21tZW50SWQpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0NvbW1lbnQgSUQgaXMgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgLy8gMS4gR2V0IHRoaXMgc3BlY2lmaWMgcGFyZW50IGNvbW1lbnRcbiAgICBjb25zdCB7IGRhdGE6IHBhcmVudENvbW1lbnQsIGVycm9yOiBwYXJlbnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdjb21tZW50cycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnY29tbWVudF9pZCcsIGNvbW1lbnRJZClcbiAgICAgIC5zaW5nbGUoKTtcbiAgICBcbiAgICBpZiAocGFyZW50RXJyb3IgfHwgIXBhcmVudENvbW1lbnQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBQYXJlbnQgY29tbWVudCBub3QgZm91bmQ6JywgY29tbWVudElkKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBlcnJvcjogJ1BhcmVudCBjb21tZW50IG5vdCBmb3VuZCcsIFxuICAgICAgICByZXBsaWVzOiBbXSxcbiAgICAgICAgY291bnQ6IDBcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGDinIUgRm91bmQgcGFyZW50IGNvbW1lbnQ6ICR7cGFyZW50Q29tbWVudC5jb21tZW50X2lkfWApO1xuICAgIFxuICAgIC8vIDIuIEZldGNoIGFsbCByZXBsaWVzIGZvciB0aGlzIGNvbW1lbnRcbiAgICBjb25zdCB7IGRhdGE6IHJlcGxpZXMsIGVycm9yOiByZXBsaWVzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnY29tbWVudHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ3BhcmVudF9pZCcsIGNvbW1lbnRJZClcbiAgICAgIC5vcmRlcigncHVibGlzaGVkX2F0JywgeyBhc2NlbmRpbmc6IHRydWUgfSk7XG4gICAgXG4gICAgaWYgKHJlcGxpZXNFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGZldGNoaW5nIHJlcGxpZXM6JywgcmVwbGllc0Vycm9yKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiByZXBsaWVzRXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhg8J+TiiBGb3VuZCAke3JlcGxpZXM/Lmxlbmd0aCB8fCAwfSByZXBsaWVzIGZvciBjb21tZW50ICR7Y29tbWVudElkfWApO1xuICAgIFxuICAgIC8vIExvZyB0aGUgZmlyc3QgZmV3IHJlcGxpZXMgdG8gaGVscCBkZWJ1Z1xuICAgIGlmIChyZXBsaWVzICYmIHJlcGxpZXMubGVuZ3RoID4gMCkge1xuICAgICAgcmVwbGllcy5zbGljZSgwLCAzKS5mb3JFYWNoKChyZXBseSwgaSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgUmVwbHkgJHtpKzF9OiBJRD0ke3JlcGx5LmNvbW1lbnRfaWR9LCBQYXJlbnQ9JHtyZXBseS5wYXJlbnRfaWR9LCBUZXh0PSR7cmVwbHkudGV4dC5zdWJzdHJpbmcoMCwgNTApfS4uLmApO1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFRyYW5zZm9ybSB0aGUgY29tbWVudHMgdG8gZnJvbnRlbmQgZm9ybWF0XG4gICAgY29uc3QgZm9ybWF0dGVkUmVwbGllcyA9IHJlcGxpZXM/Lm1hcChtYXBEYkNvbW1lbnRUb0NvbW1lbnREYXRhKSB8fCBbXTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIHJlcGxpZXM6IGZvcm1hdHRlZFJlcGxpZXMsXG4gICAgICBjb3VudDogZm9ybWF0dGVkUmVwbGllcy5sZW5ndGhcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgU2VydmVyIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwic3VwYWJhc2UiLCJtYXBEYkNvbW1lbnRUb0NvbW1lbnREYXRhIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIm5leHRVcmwiLCJjb21tZW50SWQiLCJnZXQiLCJjb25zb2xlIiwibG9nIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiZGF0YSIsInBhcmVudENvbW1lbnQiLCJwYXJlbnRFcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsInJlcGxpZXMiLCJjb3VudCIsImNvbW1lbnRfaWQiLCJyZXBsaWVzRXJyb3IiLCJvcmRlciIsImFzY2VuZGluZyIsIm1lc3NhZ2UiLCJsZW5ndGgiLCJzbGljZSIsImZvckVhY2giLCJyZXBseSIsImkiLCJwYXJlbnRfaWQiLCJ0ZXh0Iiwic3Vic3RyaW5nIiwiZm9ybWF0dGVkUmVwbGllcyIsIm1hcCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/comment-replies/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://frcxgsqnkkmelonjxgpb.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZyY3hnc3Fua2ttZWxvbmp4Z3BiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2NjYyMTIsImV4cCI6MjA1NjI0MjIxMn0.R51t6tUwsRW2gcu8gxmgbw20sm2sWm25S9lvDWVoyuM\";\n// Check if the environment variables are set\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.error(\"Missing Supabase environment variables. Check your .env.local file.\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl || \"\", supabaseAnonKey || \"\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0Q7QUFFcEQsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBRWpFLDZDQUE2QztBQUM3QyxJQUFJLENBQUNELGVBQWUsQ0FBQ0ksaUJBQWlCO0lBQ3BDRSxRQUFRQyxLQUFLLENBQUM7QUFDaEI7QUFFTyxNQUFNQyxXQUFXVCxtRUFBWUEsQ0FDbENDLGVBQWUsSUFDZkksbUJBQW1CLElBQ3BCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veW91dHViZS1jb21tZW50cy1hbmFseXplci8uL2xpYi9zdXBhYmFzZS50cz9jOTlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcblxuLy8gQ2hlY2sgaWYgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgc2V0XG5pZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUFub25LZXkpIHtcbiAgY29uc29sZS5lcnJvcignTWlzc2luZyBTdXBhYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuIENoZWNrIHlvdXIgLmVudi5sb2NhbCBmaWxlLicpO1xufVxuXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoXG4gIHN1cGFiYXNlVXJsIHx8ICcnLFxuICBzdXBhYmFzZUFub25LZXkgfHwgJydcbilcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImNvbnNvbGUiLCJlcnJvciIsInN1cGFiYXNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils.ts":
/*!**********************!*\
  !*** ./lib/utils.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cn: () => (/* binding */ cn),\n/* harmony export */   createMarkup: () => (/* binding */ createMarkup),\n/* harmony export */   decodeAllHtmlEntities: () => (/* binding */ decodeAllHtmlEntities),\n/* harmony export */   decodeHtmlEntities: () => (/* binding */ decodeHtmlEntities)\n/* harmony export */ });\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! clsx */ \"(rsc)/./node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var tailwind_merge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! tailwind-merge */ \"(rsc)/./node_modules/tailwind-merge/dist/lib/tw-merge.mjs\");\n/* harmony import */ var he__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! he */ \"(rsc)/./node_modules/he/he.js\");\n/* harmony import */ var he__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(he__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nfunction cn(...inputs) {\n    return (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_2__.twMerge)((0,clsx__WEBPACK_IMPORTED_MODULE_0__.clsx)(inputs));\n}\n/**\n * Creates a safe markup object for dangerouslySetInnerHTML\n */ function createMarkup(html) {\n    // Use DOMPurify if available (client-side)\n    if (typeof DOMPurify !== \"undefined\") {\n        return {\n            __html: DOMPurify.sanitize(html || \"\", {\n                ALLOWED_TAGS: [\n                    \"b\",\n                    \"i\",\n                    \"em\",\n                    \"strong\",\n                    \"a\",\n                    \"br\",\n                    \"p\"\n                ],\n                ALLOWED_ATTR: [\n                    \"href\",\n                    \"target\",\n                    \"rel\"\n                ]\n            })\n        };\n    }\n    // Basic server-side fallback\n    return {\n        __html: html || \"\"\n    };\n}\n/**\n * Decodes HTML entities in text returned from YouTube API\n * e.g. \"I&#39;ve\" becomes \"I've\"\n */ function decodeHtmlEntities(text) {\n    if (!text) return \"\";\n    return he__WEBPACK_IMPORTED_MODULE_1___default().decode(text);\n}\n/**\n * More thorough HTML entity decoding that also handles special cases\n */ function decodeAllHtmlEntities(text) {\n    if (!text) return \"\";\n    // First use the he library for standard entities\n    const decoded = he__WEBPACK_IMPORTED_MODULE_1___default().decode(text);\n    // Then handle any special cases that might not be covered\n    return decoded.replace(/&amp;/g, \"&\").replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\").replace(/&quot;/g, '\"').replace(/&#39;/g, \"'\").replace(/&#x27;/g, \"'\").replace(/&#x2F;/g, \"/\").replace(/&#x60;/g, \"`\").replace(/&#x3D;/g, \"=\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBNkM7QUFDSjtBQUNyQjtBQUViLFNBQVNHLEdBQUcsR0FBR0MsTUFBb0I7SUFDeEMsT0FBT0gsdURBQU9BLENBQUNELDBDQUFJQSxDQUFDSTtBQUN0QjtBQUVBOztDQUVDLEdBQ00sU0FBU0MsYUFBYUMsSUFBWTtJQUN2QywyQ0FBMkM7SUFDM0MsSUFBSSxPQUFPQyxjQUFjLGFBQWE7UUFDcEMsT0FBTztZQUNMQyxRQUFRRCxVQUFVRSxRQUFRLENBQUNILFFBQVEsSUFBSTtnQkFDckNJLGNBQWM7b0JBQUM7b0JBQUs7b0JBQUs7b0JBQU07b0JBQVU7b0JBQUs7b0JBQU07aUJBQUk7Z0JBQ3hEQyxjQUFjO29CQUFDO29CQUFRO29CQUFVO2lCQUFNO1lBQ3pDO1FBQ0Y7SUFDRjtJQUVBLDZCQUE2QjtJQUM3QixPQUFPO1FBQUVILFFBQVFGLFFBQVE7SUFBRztBQUM5QjtBQUVBOzs7Q0FHQyxHQUNNLFNBQVNNLG1CQUFtQkMsSUFBWTtJQUM3QyxJQUFJLENBQUNBLE1BQU0sT0FBTztJQUNsQixPQUFPWCxnREFBUyxDQUFDVztBQUNuQjtBQUVBOztDQUVDLEdBQ00sU0FBU0Usc0JBQXNCRixJQUFZO0lBQ2hELElBQUksQ0FBQ0EsTUFBTSxPQUFPO0lBRWxCLGlEQUFpRDtJQUNqRCxNQUFNRyxVQUFVZCxnREFBUyxDQUFDVztJQUUxQiwwREFBMEQ7SUFDMUQsT0FBT0csUUFDSkMsT0FBTyxDQUFDLFVBQVUsS0FDbEJBLE9BQU8sQ0FBQyxTQUFTLEtBQ2pCQSxPQUFPLENBQUMsU0FBUyxLQUNqQkEsT0FBTyxDQUFDLFdBQVcsS0FDbkJBLE9BQU8sQ0FBQyxVQUFVLEtBQ2xCQSxPQUFPLENBQUMsV0FBVyxLQUNuQkEsT0FBTyxDQUFDLFdBQVcsS0FDbkJBLE9BQU8sQ0FBQyxXQUFXLEtBQ25CQSxPQUFPLENBQUMsV0FBVztBQUN4QiIsInNvdXJjZXMiOlsid2VicGFjazovL3lvdXR1YmUtY29tbWVudHMtYW5hbHl6ZXIvLi9saWIvdXRpbHMudHM/Zjc0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIENsYXNzVmFsdWUsIGNsc3ggfSBmcm9tIFwiY2xzeFwiO1xuaW1wb3J0IHsgdHdNZXJnZSB9IGZyb20gXCJ0YWlsd2luZC1tZXJnZVwiO1xuaW1wb3J0IGhlIGZyb20gJ2hlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNuKC4uLmlucHV0czogQ2xhc3NWYWx1ZVtdKSB7XG4gIHJldHVybiB0d01lcmdlKGNsc3goaW5wdXRzKSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHNhZmUgbWFya3VwIG9iamVjdCBmb3IgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1hcmt1cChodG1sOiBzdHJpbmcpIHtcbiAgLy8gVXNlIERPTVB1cmlmeSBpZiBhdmFpbGFibGUgKGNsaWVudC1zaWRlKVxuICBpZiAodHlwZW9mIERPTVB1cmlmeSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4geyBcbiAgICAgIF9faHRtbDogRE9NUHVyaWZ5LnNhbml0aXplKGh0bWwgfHwgJycsIHtcbiAgICAgICAgQUxMT1dFRF9UQUdTOiBbJ2InLCAnaScsICdlbScsICdzdHJvbmcnLCAnYScsICdicicsICdwJ10sXG4gICAgICAgIEFMTE9XRURfQVRUUjogWydocmVmJywgJ3RhcmdldCcsICdyZWwnXVxuICAgICAgfSkgXG4gICAgfTtcbiAgfVxuICBcbiAgLy8gQmFzaWMgc2VydmVyLXNpZGUgZmFsbGJhY2tcbiAgcmV0dXJuIHsgX19odG1sOiBodG1sIHx8ICcnIH07XG59XG5cbi8qKlxuICogRGVjb2RlcyBIVE1MIGVudGl0aWVzIGluIHRleHQgcmV0dXJuZWQgZnJvbSBZb3VUdWJlIEFQSVxuICogZS5nLiBcIkkmIzM5O3ZlXCIgYmVjb21lcyBcIkkndmVcIlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlSHRtbEVudGl0aWVzKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghdGV4dCkgcmV0dXJuICcnO1xuICByZXR1cm4gaGUuZGVjb2RlKHRleHQpO1xufVxuXG4vKipcbiAqIE1vcmUgdGhvcm91Z2ggSFRNTCBlbnRpdHkgZGVjb2RpbmcgdGhhdCBhbHNvIGhhbmRsZXMgc3BlY2lhbCBjYXNlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlQWxsSHRtbEVudGl0aWVzKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghdGV4dCkgcmV0dXJuICcnO1xuICBcbiAgLy8gRmlyc3QgdXNlIHRoZSBoZSBsaWJyYXJ5IGZvciBzdGFuZGFyZCBlbnRpdGllc1xuICBjb25zdCBkZWNvZGVkID0gaGUuZGVjb2RlKHRleHQpO1xuICBcbiAgLy8gVGhlbiBoYW5kbGUgYW55IHNwZWNpYWwgY2FzZXMgdGhhdCBtaWdodCBub3QgYmUgY292ZXJlZFxuICByZXR1cm4gZGVjb2RlZFxuICAgIC5yZXBsYWNlKC8mYW1wOy9nLCAnJicpXG4gICAgLnJlcGxhY2UoLyZsdDsvZywgJzwnKVxuICAgIC5yZXBsYWNlKC8mZ3Q7L2csICc+JylcbiAgICAucmVwbGFjZSgvJnF1b3Q7L2csICdcIicpXG4gICAgLnJlcGxhY2UoLyYjMzk7L2csIFwiJ1wiKVxuICAgIC5yZXBsYWNlKC8mI3gyNzsvZywgXCInXCIpXG4gICAgLnJlcGxhY2UoLyYjeDJGOy9nLCAnLycpXG4gICAgLnJlcGxhY2UoLyYjeDYwOy9nLCAnYCcpXG4gICAgLnJlcGxhY2UoLyYjeDNEOy9nLCAnPScpO1xufSAiXSwibmFtZXMiOlsiY2xzeCIsInR3TWVyZ2UiLCJoZSIsImNuIiwiaW5wdXRzIiwiY3JlYXRlTWFya3VwIiwiaHRtbCIsIkRPTVB1cmlmeSIsIl9faHRtbCIsInNhbml0aXplIiwiQUxMT1dFRF9UQUdTIiwiQUxMT1dFRF9BVFRSIiwiZGVjb2RlSHRtbEVudGl0aWVzIiwidGV4dCIsImRlY29kZSIsImRlY29kZUFsbEh0bWxFbnRpdGllcyIsImRlY29kZWQiLCJyZXBsYWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils.ts\n");

/***/ }),

/***/ "(rsc)/./lib/youtube.ts":
/*!************************!*\
  !*** ./lib/youtube.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchAllVideosByChannel: () => (/* binding */ fetchAllVideosByChannel),\n/* harmony export */   fetchComments: () => (/* binding */ fetchComments),\n/* harmony export */   fetchLatestChannelComments: () => (/* binding */ fetchLatestChannelComments),\n/* harmony export */   fetchVideosByChannel: () => (/* binding */ fetchVideosByChannel),\n/* harmony export */   getChannelVideos: () => (/* binding */ getChannelVideos),\n/* harmony export */   getCommentReplies: () => (/* binding */ getCommentReplies),\n/* harmony export */   getCommentThreads: () => (/* binding */ getCommentThreads),\n/* harmony export */   getCommentsForVideo: () => (/* binding */ getCommentsForVideo),\n/* harmony export */   mapDbCommentToCommentData: () => (/* binding */ mapDbCommentToCommentData),\n/* harmony export */   mapYouTubeCommentToDbComment: () => (/* binding */ mapYouTubeCommentToDbComment),\n/* harmony export */   searchForChannel: () => (/* binding */ searchForChannel),\n/* harmony export */   updateCommentReplyCounts: () => (/* binding */ updateCommentReplyCounts)\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase */ \"(rsc)/./lib/supabase.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"(rsc)/./lib/utils.ts\");\n\n\n/**\n * YouTube API integration for fetching channel data and comments\n * Based on the YouTube Data API v3 documentation: \n * https://developers.google.com/youtube/v3/docs\n */ /**\n * Searches for a YouTube channel by name\n * @param channelName The name of the channel to search for\n * @param apiKey YouTube API key\n * @returns The channel ID\n */ async function searchForChannel(channelName, apiKey) {\n    const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(channelName)}&type=channel&key=${apiKey}`;\n    const response = await fetch(url);\n    const data = await response.json();\n    if (!data.items || data.items.length === 0) {\n        throw new Error(\"Channel not found\");\n    }\n    return data.items[0].id.channelId;\n}\n/**\n * Fetches videos for a YouTube channel\n */ async function fetchVideosByChannel(channelId, apiKey, maxResults = 50, pageToken) {\n    const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelId}&maxResults=${maxResults}&order=date&type=video&key=${apiKey}${pageToken ? `&pageToken=${pageToken}` : \"\"}`;\n    const response = await fetch(url);\n    return await response.json();\n}\n/**\n * Fetches all videos for a YouTube channel with pagination\n */ async function fetchAllVideosByChannel(channelId, apiKey) {\n    let allVideos = [];\n    let nextPageToken;\n    do {\n        console.log(`Fetching videos for channel ${channelId}${nextPageToken ? ` (page token: ${nextPageToken})` : \"\"}`);\n        const response = await fetchVideosByChannel(channelId, apiKey, 50, nextPageToken);\n        allVideos = [\n            ...allVideos,\n            ...response.items || []\n        ];\n        nextPageToken = response.nextPageToken;\n        // Add a small delay to avoid API rate limits\n        if (nextPageToken) {\n            await new Promise((resolve)=>setTimeout(resolve, 100));\n        }\n    }while (nextPageToken);\n    return allVideos;\n}\n/**\n * Fetches comments for a specific video\n */ async function fetchComments(videoId, apiKey, pageToken) {\n    try {\n        const url = `https://www.googleapis.com/youtube/v3/commentThreads?part=snippet,replies&videoId=${videoId}&maxResults=100&key=${apiKey}${pageToken ? `&pageToken=${pageToken}` : \"\"}`;\n        const response = await fetch(url);\n        if (!response.ok) {\n            throw new Error(`Failed to fetch comments: ${response.statusText}`);\n        }\n        return await response.json();\n    } catch (error) {\n        console.error(\"Error fetching comments:\", error);\n        throw error;\n    }\n}\n/**\n * Fetches the latest comments from a YouTube channel\n */ async function fetchLatestChannelComments(channelId, apiKey, maxVideos = 10, includeOldVideos = false, maxComments = 1000, includeReplies = true) {\n    // Fetch videos first\n    let videosResponse = await fetchVideosByChannel(channelId, apiKey);\n    let processedVideos = videosResponse.items || [];\n    // If we should include older videos beyond the first page\n    if (includeOldVideos && videosResponse.nextPageToken) {\n        const allVideos = await fetchAllVideosByChannel(channelId, apiKey);\n        processedVideos = allVideos;\n        // Limit to most recent videos\n        if (maxVideos !== -1) {\n            processedVideos = processedVideos.slice(0, maxVideos);\n        }\n    }\n    // Process each video to get comments\n    const allComments = [];\n    let fetchedCommentCount = 0;\n    for (const video of processedVideos){\n        // Skip if we've reached max comments\n        if (maxComments !== -1 && fetchedCommentCount >= maxComments) {\n            break;\n        }\n        try {\n            // Fix: Ensure videoId is properly accessed\n            const videoId = video.id?.videoId;\n            if (!videoId) {\n                console.warn(\"Missing videoId for video:\", video);\n                continue;\n            }\n            const commentsResponse = await fetchComments(videoId, apiKey);\n            // Process only top-level comments to start\n            const videoComments = commentsResponse.items || [];\n            for (const commentThread of videoComments){\n                if (!commentThread?.snippet?.topLevelComment?.snippet) {\n                    console.warn(\"Malformed comment thread:\", commentThread);\n                    continue;\n                }\n                const snippet = commentThread.snippet.topLevelComment.snippet;\n                // Add to our list\n                allComments.push({\n                    id: commentThread.id,\n                    videoId: videoId,\n                    videoTitle: video.snippet?.title || \"Unknown Video\",\n                    authorName: snippet.authorDisplayName,\n                    authorProfileUrl: snippet.authorProfileImageUrl,\n                    text: snippet.textDisplay,\n                    likeCount: snippet.likeCount,\n                    publishedAt: snippet.publishedAt,\n                    updatedAt: snippet.updatedAt || snippet.publishedAt,\n                    totalReplyCount: commentThread.snippet.totalReplyCount || 0,\n                    replies: [] // Initialize empty array for replies\n                });\n                fetchedCommentCount++;\n                // Add replies if there are any and we want them\n                if (includeReplies && commentThread.replies?.comments) {\n                    for (const reply of commentThread.replies.comments){\n                        if (!reply?.snippet) {\n                            console.warn(\"Malformed reply:\", reply);\n                            continue;\n                        }\n                        allComments.push({\n                            id: reply.id,\n                            videoId: videoId,\n                            videoTitle: video.snippet?.title || \"Unknown Video\",\n                            authorName: reply.snippet.authorDisplayName,\n                            authorProfileUrl: reply.snippet.authorProfileImageUrl,\n                            text: reply.snippet.textDisplay,\n                            likeCount: reply.snippet.likeCount || 0,\n                            publishedAt: reply.snippet.publishedAt,\n                            updatedAt: reply.snippet.updatedAt || reply.snippet.publishedAt,\n                            totalReplyCount: 0,\n                            parentId: commentThread.id,\n                            replies: []\n                        });\n                        fetchedCommentCount++;\n                    }\n                }\n                // Check if we've reached the max\n                if (maxComments !== -1 && fetchedCommentCount >= maxComments) {\n                    break;\n                }\n            }\n        } catch (error) {\n            // Just log and continue with next video\n            console.error(`Error fetching comments for video ${video.id?.videoId}:`, error);\n        }\n    }\n    return allComments;\n}\n/**\n * Get YouTube comments for a video\n */ async function getCommentsForVideo(videoId, apiKey, maxComments = -1, includeReplies = true) {\n    console.log(`Getting comments for video ${videoId}, including replies: ${includeReplies}`);\n    let comments = []; // Using Record<string, any> for flexibility\n    let nextPageToken;\n    let commentCount = 0;\n    do {\n        console.log(`Fetching comments page ${commentCount > 0 ? commentCount / 20 + 1 : 1}`);\n        const response = await fetchComments(videoId, apiKey, nextPageToken);\n        const videoComments = response.items || [];\n        // Process each top-level comment\n        for (const comment of videoComments){\n            comments.push(comment);\n            commentCount++;\n            // Process replies if available and requested\n            if (includeReplies && comment.replies?.comments) {\n                console.log(`Found ${comment.replies.comments.length} replies for comment ${comment.id}`);\n                for (const reply of comment.replies.comments){\n                    // Ensure the reply has a properly formatted parent_id\n                    const replyComment = {\n                        ...reply,\n                        snippet: {\n                            ...reply.snippet,\n                            parentId: comment.id,\n                            videoId: videoId // Ensure videoId is included\n                        }\n                    };\n                    comments.push(replyComment);\n                    commentCount++;\n                }\n            }\n        }\n        nextPageToken = response.nextPageToken;\n        // Continue until we've reached max comments or run out of pages\n        if (maxComments !== -1 && commentCount >= maxComments) {\n            console.log(`Reached maximum of ${maxComments} comments`);\n            break;\n        }\n        // Small delay to avoid rate limiting\n        if (nextPageToken) {\n            await new Promise((resolve)=>setTimeout(resolve, 300));\n        }\n    }while (nextPageToken);\n    console.log(`Retrieved ${comments.length} comments total`);\n    return comments;\n}\n// Updated mapYouTubeCommentToDbComment function with more robust type checking\nfunction mapYouTubeCommentToDbComment(comment, channelId) {\n    // Very explicitly extract parentId from all possible locations\n    let parentId = null;\n    // First check if it's in snippet.parentId\n    if (comment.snippet?.parentId) {\n        parentId = comment.snippet.parentId;\n        console.log(`Found parentId in snippet.parentId: ${parentId}`);\n    } else if (comment.snippet?.topLevelComment?.id && comment.id !== comment.snippet.topLevelComment.id) {\n        parentId = comment.snippet.topLevelComment.id;\n        console.log(`Found parentId from topLevelComment: ${parentId}`);\n    }\n    // If this is a direct API reply, it might be structured differently\n    if (comment.snippet?.type === \"reply\" && comment.snippet?.parentId) {\n        parentId = comment.snippet.parentId;\n        console.log(`Found parentId from reply type: ${parentId}`);\n    }\n    // Log mapping for debugging\n    console.log(`Mapping comment ${comment.id}, parentId: ${parentId || \"NONE (top-level)\"}`);\n    // Ensure we have proper access to all required properties\n    const topLevelSnippet = comment.snippet?.topLevelComment?.snippet;\n    const directSnippet = comment.snippet;\n    return {\n        comment_id: comment.id,\n        video_id: directSnippet?.videoId,\n        author_name: topLevelSnippet?.authorDisplayName || directSnippet?.authorDisplayName,\n        author_profile_url: topLevelSnippet?.authorProfileImageUrl || directSnippet?.authorProfileImageUrl,\n        text: topLevelSnippet?.textDisplay || directSnippet?.textDisplay,\n        like_count: topLevelSnippet?.likeCount || directSnippet?.likeCount || 0,\n        published_at: topLevelSnippet?.publishedAt || directSnippet?.publishedAt,\n        channel_id: channelId,\n        is_owner_comment: false,\n        parent_id: parentId,\n        video_title: directSnippet?.videoTitle || \"\"\n    };\n}\n// Enhanced mapping function that handles all possible properties\nfunction mapDbCommentToCommentData(dbComment) {\n    return {\n        id: dbComment.comment_id,\n        authorDisplayName: dbComment.author_name || \"Unknown User\",\n        authorProfileImageUrl: dbComment.author_profile_url || \"https://www.gravatar.com/avatar/?d=mp\",\n        textDisplay: (0,_utils__WEBPACK_IMPORTED_MODULE_1__.decodeAllHtmlEntities)(dbComment.text || \"\"),\n        likeCount: dbComment.like_count || 0,\n        publishedAt: dbComment.published_at,\n        updatedAt: dbComment.updated_at || dbComment.published_at,\n        videoId: dbComment.video_id,\n        videoTitle: dbComment.video_title || \"\",\n        replyCount: dbComment.reply_count || 0,\n        isHeartedByCreator: false,\n        isPinned: false,\n        parentId: dbComment.parent_id,\n        replies: [] // Will be populated separately if needed\n    };\n}\n// Debug function to inspect parent-child relationships in the database\nfunction logAllParentChildRelationships() {\n    return _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"comments\").select(\"comment_id, parent_id\").not(\"parent_id\", \"is\", null).limit(20).then(({ data, error })=>{\n        console.log(\"\\uD83D\\uDD0D PARENT-CHILD DEBUG - Sample comments with parents:\", data);\n        console.log(\"Error if any:\", error);\n        return data;\n    });\n}\n// Modified getCommentReplies function to fix reply lookup\nasync function getCommentReplies(commentId) {\n    try {\n        console.log(\"\\uD83D\\uDD0D getCommentReplies - Looking for replies to commentId:\", commentId);\n        // First, check if any comments in the database have parent_id matching our commentId\n        const { data: replyCheck, error: replyCheckError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"comments\").select(\"count(*)\").eq(\"parent_id\", commentId).single();\n        console.log(\"\\uD83D\\uDCCA getCommentReplies - Reply check result:\", replyCheck);\n        if (replyCheckError) {\n            console.error(\"‚ùå Reply check error:\", replyCheckError);\n        }\n        // Check the actual comment we're looking for replies to\n        const { data: parentComment, error: parentError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"comments\").select(\"*\").eq(\"comment_id\", commentId).single();\n        if (parentComment) {\n            console.log(\"‚úÖ Found parent comment:\", {\n                id: parentComment.id,\n                comment_id: parentComment.comment_id,\n                video_id: parentComment.video_id,\n                text: parentComment.text?.substring(0, 50) + \"...\" || 0\n            });\n        } else {\n            console.log(\"‚ö†Ô∏è Parent comment not found for ID:\", commentId);\n        }\n        // Search for replies directly \n        const { data: replies, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"comments\").select(\"*\").eq(\"parent_id\", commentId) // This assumes parent_id references comment_id \n        .order(\"published_at\", {\n            ascending: true\n        });\n        if (error) {\n            console.error(\"‚ùå Error fetching replies:\", error);\n            return [];\n        }\n        console.log(`üìä Found ${replies?.length || 0} replies for comment:`, commentId);\n        if (replies && replies.length > 0) {\n            // Sample the first reply\n            console.log(\"\\uD83D\\uDD0D First reply sample:\", {\n                id: replies[0].id,\n                comment_id: replies[0].comment_id,\n                parent_id: replies[0].parent_id,\n                video_id: replies[0].video_id,\n                text: replies[0].text?.substring(0, 50) + \"...\" || 0\n            });\n        }\n        // Map to the expected format\n        const replyData = replies?.map((reply)=>mapDbCommentToCommentData(reply)) || [];\n        return replyData;\n    } catch (error) {\n        console.error(\"‚ùå Error in getCommentReplies:\", error);\n        return [];\n    }\n}\n// Get videos for a channel\nasync function getChannelVideos(channelId) {\n    try {\n        // Step 1: Get the internal UUID for this YouTube channel ID\n        const { data: channel } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"channels\").select(\"id\").eq(\"channel_id\", channelId).single();\n        if (!channel) {\n            console.log(\"Channel not found with ID:\", channelId);\n            return [];\n        }\n        console.log(\"Found channel, internal ID:\", channel.id);\n        // Step 2: Use the internal UUID to query videos\n        const { data: videos, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"videos\").select(\"*\").eq(\"channel_id\", channel.id); // Using internal UUID instead of YouTube channel ID\n        if (error) {\n            console.error(\"Error fetching videos:\", error);\n            throw error;\n        }\n        if (!videos || videos.length === 0) {\n            return [];\n        }\n        // Map DB videos to VideoData format\n        const videoData = videos.map((video)=>({\n                id: video.video_id,\n                title: video.title || \"Untitled Video\",\n                description: video.description || \"\",\n                publishedAt: video.published_at,\n                thumbnailUrl: video.thumbnail_url || \"\",\n                channelId: video.channel_id\n            }));\n        return videoData;\n    } catch (error) {\n        console.error(\"Error in getChannelVideos:\", error);\n        return [];\n    }\n}\n// Add this function to inspect a comment record\nfunction inspectComment(comment) {\n    console.log(\"Comment structure:\", {\n        id: comment.id,\n        comment_id: comment.comment_id,\n        video_id: comment.video_id,\n        parent_id: comment.parent_id,\n        channel_id: comment.channel_id\n    });\n}\n// Update the getCommentThreads function with additional debugging\nasync function getCommentThreads(channelId, videoId, page = 1, perPage = 20) {\n    try {\n        console.log(\"\\uD83D\\uDD0E getCommentThreads - Inputs:\", {\n            channelId,\n            videoId,\n            page,\n            perPage\n        });\n        // Step 1: Get the internal UUID for this YouTube channel ID\n        const { data: channel, error: channelError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"channels\").select(\"*\").eq(\"channel_id\", channelId).single();\n        if (channelError) {\n            console.error(\"‚ùå getCommentThreads - Error finding channel:\", channelError);\n            return [];\n        }\n        if (!channel) {\n            console.log(\"‚ö†Ô∏è getCommentThreads - Channel not found with ID:\", channelId);\n            return [];\n        }\n        console.log(\"‚úÖ getCommentThreads - Found channel:\", {\n            internal_id: channel.id,\n            channel_id: channel.channel_id,\n            title: channel.title\n        });\n        // Step 2: Use the internal UUID to query comments\n        const startIdx = (page - 1) * perPage;\n        const endIdx = page * perPage - 1;\n        console.log(`üî¢ getCommentThreads - Range: ${startIdx} to ${endIdx}`);\n        let query = _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"comments\").select(\"*\").eq(\"channel_id\", channel.id).is(\"parent_id\", null) // Only get top-level comments\n        .order(\"published_at\", {\n            ascending: false\n        }).range(startIdx, endIdx);\n        if (videoId) {\n            query = query.eq(\"video_id\", videoId);\n        }\n        const { data: comments, error: commentsError } = await query;\n        if (commentsError) {\n            console.error(\"‚ùå getCommentThreads - Error fetching comments:\", commentsError);\n            return [];\n        }\n        console.log(`üìä getCommentThreads - Found ${comments?.length || 0} comments`);\n        if (!comments || comments.length === 0) {\n            return [];\n        }\n        // Sample the first comment to debug\n        if (comments.length > 0) {\n            console.log(\"\\uD83D\\uDD0D getCommentThreads - First comment:\", {\n                id: comments[0].id,\n                comment_id: comments[0].comment_id,\n                parent_id: comments[0].parent_id,\n                channel_id: comments[0].channel_id\n            });\n        }\n        // For each comment, count replies and map to CommentData format\n        const commentData = await Promise.all(comments.map(async (comment)=>{\n            // Count replies for this comment \n            const { count } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"comments\").select(\"*\", {\n                count: \"exact\",\n                head: true\n            }).eq(\"parent_id\", comment.comment_id);\n            const replyCount = count || 0;\n            // Map DB comment to CommentData format with reply count\n            return {\n                ...mapDbCommentToCommentData(comment),\n                replyCount\n            };\n        }));\n        return commentData;\n    } catch (error) {\n        console.error(\"‚ùå getCommentThreads - Unhandled error:\", error);\n        return [];\n    }\n}\nasync function updateCommentReplyCounts() {\n    console.log(\"Updating reply counts for all comments...\");\n    try {\n        // For each comment with replies, count them and update the reply_count\n        const { data: comments } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"comments\").select(\"comment_id\").is(\"parent_id\", null);\n        if (!comments) return;\n        for (const comment of comments){\n            // Count the replies for this comment\n            const { count } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"comments\").select(\"*\", {\n                count: \"exact\",\n                head: true\n            }).eq(\"parent_id\", comment.comment_id);\n            // Update the reply_count\n            if (count !== undefined) {\n                await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"comments\").update({\n                    reply_count: count\n                }).eq(\"comment_id\", comment.comment_id);\n            }\n        }\n        console.log(\"Reply counts updated successfully\");\n    } catch (error) {\n        console.error(\"Error updating reply counts:\", error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxNQUFNbkksK0NBQVFBLENBQzdCNEYsSUFBSSxDQUFDLFlBQ0xDLE1BQU0sQ0FBQyxLQUFLO2dCQUFFc0MsT0FBTztnQkFBU0MsTUFBTTtZQUFLLEdBQ3pDL0IsRUFBRSxDQUFDLGFBQWFqQyxRQUFRTSxVQUFVO1lBRXJDLHlCQUF5QjtZQUN6QixJQUFJeUQsVUFBVUcsV0FBVztnQkFDdkIsTUFBTXRJLCtDQUFRQSxDQUNYNEYsSUFBSSxDQUFDLFlBQ0wyQyxNQUFNLENBQUM7b0JBQUUvQyxhQUFhMkM7Z0JBQU0sR0FDNUI5QixFQUFFLENBQUMsY0FBY2pDLFFBQVFNLFVBQVU7WUFDeEM7UUFDRjtRQUVBcEQsUUFBUUMsR0FBRyxDQUFDO0lBQ2QsRUFBRSxPQUFPUSxPQUFPO1FBQ2RULFFBQVFTLEtBQUssQ0FBQyxnQ0FBZ0NBO0lBQ2hEO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95b3V0dWJlLWNvbW1lbnRzLWFuYWx5emVyLy4vbGliL3lvdXR1YmUudHM/MzIyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBcbiAgWW91VHViZUNoYW5uZWwsIFxuICBZb3VUdWJlVmlkZW8sIFxuICBZb3VUdWJlQ29tbWVudCxcbiAgWW91VHViZUNoYW5uZWxSZXNwb25zZSxcbiAgWW91VHViZVZpZGVvUmVzcG9uc2UsXG4gIFlvdVR1YmVDb21tZW50UmVzcG9uc2UsXG4gIERiQ29tbWVudCBcbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJy4vc3VwYWJhc2UnO1xuaW1wb3J0IHsgQ29tbWVudERhdGEsIFZpZGVvRGF0YSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgZGVjb2RlSHRtbEVudGl0aWVzLCBkZWNvZGVBbGxIdG1sRW50aXRpZXMgfSBmcm9tICcuL3V0aWxzJztcblxuLyoqXG4gKiBZb3VUdWJlIEFQSSBpbnRlZ3JhdGlvbiBmb3IgZmV0Y2hpbmcgY2hhbm5lbCBkYXRhIGFuZCBjb21tZW50c1xuICogQmFzZWQgb24gdGhlIFlvdVR1YmUgRGF0YSBBUEkgdjMgZG9jdW1lbnRhdGlvbjogXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS95b3V0dWJlL3YzL2RvY3NcbiAqL1xuXG4vKipcbiAqIFNlYXJjaGVzIGZvciBhIFlvdVR1YmUgY2hhbm5lbCBieSBuYW1lXG4gKiBAcGFyYW0gY2hhbm5lbE5hbWUgVGhlIG5hbWUgb2YgdGhlIGNoYW5uZWwgdG8gc2VhcmNoIGZvclxuICogQHBhcmFtIGFwaUtleSBZb3VUdWJlIEFQSSBrZXlcbiAqIEByZXR1cm5zIFRoZSBjaGFubmVsIElEXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hGb3JDaGFubmVsKGNoYW5uZWxOYW1lOiBzdHJpbmcsIGFwaUtleTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3lvdXR1YmUvdjMvc2VhcmNoP3BhcnQ9c25pcHBldCZxPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGNoYW5uZWxOYW1lKX0mdHlwZT1jaGFubmVsJmtleT0ke2FwaUtleX1gO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gIFxuICBpZiAoIWRhdGEuaXRlbXMgfHwgZGF0YS5pdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYW5uZWwgbm90IGZvdW5kJyk7XG4gIH1cbiAgXG4gIHJldHVybiBkYXRhLml0ZW1zWzBdLmlkLmNoYW5uZWxJZDtcbn1cblxuLyoqXG4gKiBGZXRjaGVzIHZpZGVvcyBmb3IgYSBZb3VUdWJlIGNoYW5uZWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoVmlkZW9zQnlDaGFubmVsKFxuICBjaGFubmVsSWQ6IHN0cmluZywgXG4gIGFwaUtleTogc3RyaW5nLCBcbiAgbWF4UmVzdWx0czogbnVtYmVyID0gNTAsXG4gIHBhZ2VUb2tlbj86IHN0cmluZ1xuKTogUHJvbWlzZTxZb3VUdWJlVmlkZW9SZXNwb25zZT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20veW91dHViZS92My9zZWFyY2g/cGFydD1zbmlwcGV0JmNoYW5uZWxJZD0ke2NoYW5uZWxJZH0mbWF4UmVzdWx0cz0ke21heFJlc3VsdHN9Jm9yZGVyPWRhdGUmdHlwZT12aWRlbyZrZXk9JHthcGlLZXl9JHtwYWdlVG9rZW4gPyBgJnBhZ2VUb2tlbj0ke3BhZ2VUb2tlbn1gIDogJyd9YDtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xufVxuXG4vKipcbiAqIEZldGNoZXMgYWxsIHZpZGVvcyBmb3IgYSBZb3VUdWJlIGNoYW5uZWwgd2l0aCBwYWdpbmF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEFsbFZpZGVvc0J5Q2hhbm5lbChcbiAgY2hhbm5lbElkOiBzdHJpbmcsIFxuICBhcGlLZXk6IHN0cmluZ1xuKTogUHJvbWlzZTxZb3VUdWJlVmlkZW9bXT4ge1xuICBsZXQgYWxsVmlkZW9zOiBZb3VUdWJlVmlkZW9bXSA9IFtdO1xuICBsZXQgbmV4dFBhZ2VUb2tlbjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBcbiAgZG8ge1xuICAgIGNvbnNvbGUubG9nKGBGZXRjaGluZyB2aWRlb3MgZm9yIGNoYW5uZWwgJHtjaGFubmVsSWR9JHtuZXh0UGFnZVRva2VuID8gYCAocGFnZSB0b2tlbjogJHtuZXh0UGFnZVRva2VufSlgIDogJyd9YCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFZpZGVvc0J5Q2hhbm5lbChjaGFubmVsSWQsIGFwaUtleSwgNTAsIG5leHRQYWdlVG9rZW4pO1xuICAgIGFsbFZpZGVvcyA9IFsuLi5hbGxWaWRlb3MsIC4uLihyZXNwb25zZS5pdGVtcyB8fCBbXSldO1xuICAgIG5leHRQYWdlVG9rZW4gPSByZXNwb25zZS5uZXh0UGFnZVRva2VuO1xuICAgIFxuICAgIC8vIEFkZCBhIHNtYWxsIGRlbGF5IHRvIGF2b2lkIEFQSSByYXRlIGxpbWl0c1xuICAgIGlmIChuZXh0UGFnZVRva2VuKSB7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XG4gICAgfVxuICB9IHdoaWxlIChuZXh0UGFnZVRva2VuKTtcbiAgXG4gIHJldHVybiBhbGxWaWRlb3M7XG59XG5cbi8qKlxuICogRmV0Y2hlcyBjb21tZW50cyBmb3IgYSBzcGVjaWZpYyB2aWRlb1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hDb21tZW50cyhcbiAgdmlkZW9JZDogc3RyaW5nLCBcbiAgYXBpS2V5OiBzdHJpbmcsIFxuICBwYWdlVG9rZW4/OiBzdHJpbmdcbik6IFByb21pc2U8WW91VHViZUNvbW1lbnRSZXNwb25zZT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVybCA9IGBodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS95b3V0dWJlL3YzL2NvbW1lbnRUaHJlYWRzP3BhcnQ9c25pcHBldCxyZXBsaWVzJnZpZGVvSWQ9JHt2aWRlb0lkfSZtYXhSZXN1bHRzPTEwMCZrZXk9JHthcGlLZXl9JHtwYWdlVG9rZW4gPyBgJnBhZ2VUb2tlbj0ke3BhZ2VUb2tlbn1gIDogJyd9YDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggY29tbWVudHM6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjb21tZW50czonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaGVzIHRoZSBsYXRlc3QgY29tbWVudHMgZnJvbSBhIFlvdVR1YmUgY2hhbm5lbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hMYXRlc3RDaGFubmVsQ29tbWVudHMoXG4gIGNoYW5uZWxJZDogc3RyaW5nLFxuICBhcGlLZXk6IHN0cmluZyxcbiAgbWF4VmlkZW9zOiBudW1iZXIgPSAxMCxcbiAgaW5jbHVkZU9sZFZpZGVvczogYm9vbGVhbiA9IGZhbHNlLFxuICBtYXhDb21tZW50czogbnVtYmVyID0gMTAwMCxcbiAgaW5jbHVkZVJlcGxpZXM6IGJvb2xlYW4gPSB0cnVlXG4pOiBQcm9taXNlPFlvdVR1YmVDb21tZW50W10+IHtcbiAgLy8gRmV0Y2ggdmlkZW9zIGZpcnN0XG4gIGxldCB2aWRlb3NSZXNwb25zZSA9IGF3YWl0IGZldGNoVmlkZW9zQnlDaGFubmVsKGNoYW5uZWxJZCwgYXBpS2V5KTtcbiAgbGV0IHByb2Nlc3NlZFZpZGVvcyA9IHZpZGVvc1Jlc3BvbnNlLml0ZW1zIHx8IFtdO1xuICBcbiAgLy8gSWYgd2Ugc2hvdWxkIGluY2x1ZGUgb2xkZXIgdmlkZW9zIGJleW9uZCB0aGUgZmlyc3QgcGFnZVxuICBpZiAoaW5jbHVkZU9sZFZpZGVvcyAmJiB2aWRlb3NSZXNwb25zZS5uZXh0UGFnZVRva2VuKSB7XG4gICAgY29uc3QgYWxsVmlkZW9zID0gYXdhaXQgZmV0Y2hBbGxWaWRlb3NCeUNoYW5uZWwoY2hhbm5lbElkLCBhcGlLZXkpO1xuICAgIHByb2Nlc3NlZFZpZGVvcyA9IGFsbFZpZGVvcztcbiAgICBcbiAgICAvLyBMaW1pdCB0byBtb3N0IHJlY2VudCB2aWRlb3NcbiAgICBpZiAobWF4VmlkZW9zICE9PSAtMSkge1xuICAgICAgcHJvY2Vzc2VkVmlkZW9zID0gcHJvY2Vzc2VkVmlkZW9zLnNsaWNlKDAsIG1heFZpZGVvcyk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBQcm9jZXNzIGVhY2ggdmlkZW8gdG8gZ2V0IGNvbW1lbnRzXG4gIGNvbnN0IGFsbENvbW1lbnRzOiBZb3VUdWJlQ29tbWVudFtdID0gW107XG4gIGxldCBmZXRjaGVkQ29tbWVudENvdW50ID0gMDtcbiAgXG4gIGZvciAoY29uc3QgdmlkZW8gb2YgcHJvY2Vzc2VkVmlkZW9zKSB7XG4gICAgLy8gU2tpcCBpZiB3ZSd2ZSByZWFjaGVkIG1heCBjb21tZW50c1xuICAgIGlmIChtYXhDb21tZW50cyAhPT0gLTEgJiYgZmV0Y2hlZENvbW1lbnRDb3VudCA+PSBtYXhDb21tZW50cykge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBGaXg6IEVuc3VyZSB2aWRlb0lkIGlzIHByb3Blcmx5IGFjY2Vzc2VkXG4gICAgICBjb25zdCB2aWRlb0lkID0gdmlkZW8uaWQ/LnZpZGVvSWQ7XG4gICAgICBpZiAoIXZpZGVvSWQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdNaXNzaW5nIHZpZGVvSWQgZm9yIHZpZGVvOicsIHZpZGVvKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbW1lbnRzUmVzcG9uc2UgPSBhd2FpdCBmZXRjaENvbW1lbnRzKHZpZGVvSWQsIGFwaUtleSk7XG4gICAgICBcbiAgICAgIC8vIFByb2Nlc3Mgb25seSB0b3AtbGV2ZWwgY29tbWVudHMgdG8gc3RhcnRcbiAgICAgIGNvbnN0IHZpZGVvQ29tbWVudHMgPSBjb21tZW50c1Jlc3BvbnNlLml0ZW1zIHx8IFtdO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IGNvbW1lbnRUaHJlYWQgb2YgdmlkZW9Db21tZW50cykge1xuICAgICAgICBpZiAoIWNvbW1lbnRUaHJlYWQ/LnNuaXBwZXQ/LnRvcExldmVsQ29tbWVudD8uc25pcHBldCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignTWFsZm9ybWVkIGNvbW1lbnQgdGhyZWFkOicsIGNvbW1lbnRUaHJlYWQpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzbmlwcGV0ID0gY29tbWVudFRocmVhZC5zbmlwcGV0LnRvcExldmVsQ29tbWVudC5zbmlwcGV0O1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHRvIG91ciBsaXN0XG4gICAgICAgIGFsbENvbW1lbnRzLnB1c2goe1xuICAgICAgICAgIGlkOiBjb21tZW50VGhyZWFkLmlkLFxuICAgICAgICAgIHZpZGVvSWQ6IHZpZGVvSWQsXG4gICAgICAgICAgdmlkZW9UaXRsZTogdmlkZW8uc25pcHBldD8udGl0bGUgfHwgJ1Vua25vd24gVmlkZW8nLFxuICAgICAgICAgIGF1dGhvck5hbWU6IHNuaXBwZXQuYXV0aG9yRGlzcGxheU5hbWUsXG4gICAgICAgICAgYXV0aG9yUHJvZmlsZVVybDogc25pcHBldC5hdXRob3JQcm9maWxlSW1hZ2VVcmwsXG4gICAgICAgICAgdGV4dDogc25pcHBldC50ZXh0RGlzcGxheSxcbiAgICAgICAgICBsaWtlQ291bnQ6IHNuaXBwZXQubGlrZUNvdW50LFxuICAgICAgICAgIHB1Ymxpc2hlZEF0OiBzbmlwcGV0LnB1Ymxpc2hlZEF0LFxuICAgICAgICAgIHVwZGF0ZWRBdDogc25pcHBldC51cGRhdGVkQXQgfHwgc25pcHBldC5wdWJsaXNoZWRBdCwgLy8gRmFsbGJhY2sgaWYgdXBkYXRlZEF0IG1pc3NpbmdcbiAgICAgICAgICB0b3RhbFJlcGx5Q291bnQ6IGNvbW1lbnRUaHJlYWQuc25pcHBldC50b3RhbFJlcGx5Q291bnQgfHwgMCxcbiAgICAgICAgICByZXBsaWVzOiBbXSAvLyBJbml0aWFsaXplIGVtcHR5IGFycmF5IGZvciByZXBsaWVzXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgZmV0Y2hlZENvbW1lbnRDb3VudCsrO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHJlcGxpZXMgaWYgdGhlcmUgYXJlIGFueSBhbmQgd2Ugd2FudCB0aGVtXG4gICAgICAgIGlmIChpbmNsdWRlUmVwbGllcyAmJiBjb21tZW50VGhyZWFkLnJlcGxpZXM/LmNvbW1lbnRzKSB7XG4gICAgICAgICAgZm9yIChjb25zdCByZXBseSBvZiBjb21tZW50VGhyZWFkLnJlcGxpZXMuY29tbWVudHMpIHtcbiAgICAgICAgICAgIGlmICghcmVwbHk/LnNuaXBwZXQpIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdNYWxmb3JtZWQgcmVwbHk6JywgcmVwbHkpO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYWxsQ29tbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiByZXBseS5pZCxcbiAgICAgICAgICAgICAgdmlkZW9JZDogdmlkZW9JZCxcbiAgICAgICAgICAgICAgdmlkZW9UaXRsZTogdmlkZW8uc25pcHBldD8udGl0bGUgfHwgJ1Vua25vd24gVmlkZW8nLFxuICAgICAgICAgICAgICBhdXRob3JOYW1lOiByZXBseS5zbmlwcGV0LmF1dGhvckRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICBhdXRob3JQcm9maWxlVXJsOiByZXBseS5zbmlwcGV0LmF1dGhvclByb2ZpbGVJbWFnZVVybCxcbiAgICAgICAgICAgICAgdGV4dDogcmVwbHkuc25pcHBldC50ZXh0RGlzcGxheSxcbiAgICAgICAgICAgICAgbGlrZUNvdW50OiByZXBseS5zbmlwcGV0Lmxpa2VDb3VudCB8fCAwLFxuICAgICAgICAgICAgICBwdWJsaXNoZWRBdDogcmVwbHkuc25pcHBldC5wdWJsaXNoZWRBdCxcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiByZXBseS5zbmlwcGV0LnVwZGF0ZWRBdCB8fCByZXBseS5zbmlwcGV0LnB1Ymxpc2hlZEF0LCAvLyBGYWxsYmFja1xuICAgICAgICAgICAgICB0b3RhbFJlcGx5Q291bnQ6IDAsXG4gICAgICAgICAgICAgIHBhcmVudElkOiBjb21tZW50VGhyZWFkLmlkLFxuICAgICAgICAgICAgICByZXBsaWVzOiBbXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZldGNoZWRDb21tZW50Q291bnQrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIHdlJ3ZlIHJlYWNoZWQgdGhlIG1heFxuICAgICAgICBpZiAobWF4Q29tbWVudHMgIT09IC0xICYmIGZldGNoZWRDb21tZW50Q291bnQgPj0gbWF4Q29tbWVudHMpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBKdXN0IGxvZyBhbmQgY29udGludWUgd2l0aCBuZXh0IHZpZGVvXG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBjb21tZW50cyBmb3IgdmlkZW8gJHt2aWRlby5pZD8udmlkZW9JZH06YCwgZXJyb3IpO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIGFsbENvbW1lbnRzO1xufVxuXG4vKipcbiAqIEdldCBZb3VUdWJlIGNvbW1lbnRzIGZvciBhIHZpZGVvXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb21tZW50c0ZvclZpZGVvKFxuICB2aWRlb0lkOiBzdHJpbmcsIFxuICBhcGlLZXk6IHN0cmluZywgXG4gIG1heENvbW1lbnRzOiBudW1iZXIgPSAtMSxcbiAgaW5jbHVkZVJlcGxpZXM6IGJvb2xlYW4gPSB0cnVlXG4pIHtcbiAgY29uc29sZS5sb2coYEdldHRpbmcgY29tbWVudHMgZm9yIHZpZGVvICR7dmlkZW9JZH0sIGluY2x1ZGluZyByZXBsaWVzOiAke2luY2x1ZGVSZXBsaWVzfWApO1xuICBcbiAgbGV0IGNvbW1lbnRzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+W10gPSBbXTsgLy8gVXNpbmcgUmVjb3JkPHN0cmluZywgYW55PiBmb3IgZmxleGliaWxpdHlcbiAgbGV0IG5leHRQYWdlVG9rZW46IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgbGV0IGNvbW1lbnRDb3VudCA9IDA7XG4gIFxuICBkbyB7XG4gICAgY29uc29sZS5sb2coYEZldGNoaW5nIGNvbW1lbnRzIHBhZ2UgJHtjb21tZW50Q291bnQgPiAwID8gY29tbWVudENvdW50IC8gMjAgKyAxIDogMX1gKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoQ29tbWVudHModmlkZW9JZCwgYXBpS2V5LCBuZXh0UGFnZVRva2VuKTtcbiAgICBjb25zdCB2aWRlb0NvbW1lbnRzID0gcmVzcG9uc2UuaXRlbXMgfHwgW107XG4gICAgXG4gICAgLy8gUHJvY2VzcyBlYWNoIHRvcC1sZXZlbCBjb21tZW50XG4gICAgZm9yIChjb25zdCBjb21tZW50IG9mIHZpZGVvQ29tbWVudHMpIHtcbiAgICAgIGNvbW1lbnRzLnB1c2goY29tbWVudCk7XG4gICAgICBjb21tZW50Q291bnQrKztcbiAgICAgIFxuICAgICAgLy8gUHJvY2VzcyByZXBsaWVzIGlmIGF2YWlsYWJsZSBhbmQgcmVxdWVzdGVkXG4gICAgICBpZiAoaW5jbHVkZVJlcGxpZXMgJiYgY29tbWVudC5yZXBsaWVzPy5jb21tZW50cykge1xuICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgJHtjb21tZW50LnJlcGxpZXMuY29tbWVudHMubGVuZ3RofSByZXBsaWVzIGZvciBjb21tZW50ICR7Y29tbWVudC5pZH1gKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgcmVwbHkgb2YgY29tbWVudC5yZXBsaWVzLmNvbW1lbnRzKSB7XG4gICAgICAgICAgLy8gRW5zdXJlIHRoZSByZXBseSBoYXMgYSBwcm9wZXJseSBmb3JtYXR0ZWQgcGFyZW50X2lkXG4gICAgICAgICAgY29uc3QgcmVwbHlDb21tZW50ID0ge1xuICAgICAgICAgICAgLi4ucmVwbHksXG4gICAgICAgICAgICBzbmlwcGV0OiB7XG4gICAgICAgICAgICAgIC4uLnJlcGx5LnNuaXBwZXQsXG4gICAgICAgICAgICAgIHBhcmVudElkOiBjb21tZW50LmlkLCAgLy8gRXhwbGljaXRseSBzZXQgdGhlIHBhcmVudCBJRCB0byB0aGUgdG9wLWxldmVsIGNvbW1lbnRcbiAgICAgICAgICAgICAgdmlkZW9JZDogdmlkZW9JZCAgICAgICAvLyBFbnN1cmUgdmlkZW9JZCBpcyBpbmNsdWRlZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgY29tbWVudHMucHVzaChyZXBseUNvbW1lbnQpO1xuICAgICAgICAgIGNvbW1lbnRDb3VudCsrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIG5leHRQYWdlVG9rZW4gPSByZXNwb25zZS5uZXh0UGFnZVRva2VuO1xuICAgIFxuICAgIC8vIENvbnRpbnVlIHVudGlsIHdlJ3ZlIHJlYWNoZWQgbWF4IGNvbW1lbnRzIG9yIHJ1biBvdXQgb2YgcGFnZXNcbiAgICBpZiAobWF4Q29tbWVudHMgIT09IC0xICYmIGNvbW1lbnRDb3VudCA+PSBtYXhDb21tZW50cykge1xuICAgICAgY29uc29sZS5sb2coYFJlYWNoZWQgbWF4aW11bSBvZiAke21heENvbW1lbnRzfSBjb21tZW50c2ApO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIFxuICAgIC8vIFNtYWxsIGRlbGF5IHRvIGF2b2lkIHJhdGUgbGltaXRpbmdcbiAgICBpZiAobmV4dFBhZ2VUb2tlbikge1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDMwMCkpO1xuICAgIH1cbiAgfSB3aGlsZSAobmV4dFBhZ2VUb2tlbik7XG4gIFxuICBjb25zb2xlLmxvZyhgUmV0cmlldmVkICR7Y29tbWVudHMubGVuZ3RofSBjb21tZW50cyB0b3RhbGApO1xuICByZXR1cm4gY29tbWVudHM7XG59XG5cbi8vIFVwZGF0ZWQgbWFwWW91VHViZUNvbW1lbnRUb0RiQ29tbWVudCBmdW5jdGlvbiB3aXRoIG1vcmUgcm9idXN0IHR5cGUgY2hlY2tpbmdcbmV4cG9ydCBmdW5jdGlvbiBtYXBZb3VUdWJlQ29tbWVudFRvRGJDb21tZW50KGNvbW1lbnQ6IFJlY29yZDxzdHJpbmcsIGFueT4sIGNoYW5uZWxJZDogc3RyaW5nKTogRGJDb21tZW50IHtcbiAgLy8gVmVyeSBleHBsaWNpdGx5IGV4dHJhY3QgcGFyZW50SWQgZnJvbSBhbGwgcG9zc2libGUgbG9jYXRpb25zXG4gIGxldCBwYXJlbnRJZCA9IG51bGw7XG4gIFxuICAvLyBGaXJzdCBjaGVjayBpZiBpdCdzIGluIHNuaXBwZXQucGFyZW50SWRcbiAgaWYgKGNvbW1lbnQuc25pcHBldD8ucGFyZW50SWQpIHtcbiAgICBwYXJlbnRJZCA9IGNvbW1lbnQuc25pcHBldC5wYXJlbnRJZDtcbiAgICBjb25zb2xlLmxvZyhgRm91bmQgcGFyZW50SWQgaW4gc25pcHBldC5wYXJlbnRJZDogJHtwYXJlbnRJZH1gKTtcbiAgfSBcbiAgLy8gVGhlbiBjaGVjayByZXBseSBzdHJ1Y3R1cmVcbiAgZWxzZSBpZiAoY29tbWVudC5zbmlwcGV0Py50b3BMZXZlbENvbW1lbnQ/LmlkICYmIGNvbW1lbnQuaWQgIT09IGNvbW1lbnQuc25pcHBldC50b3BMZXZlbENvbW1lbnQuaWQpIHtcbiAgICBwYXJlbnRJZCA9IGNvbW1lbnQuc25pcHBldC50b3BMZXZlbENvbW1lbnQuaWQ7XG4gICAgY29uc29sZS5sb2coYEZvdW5kIHBhcmVudElkIGZyb20gdG9wTGV2ZWxDb21tZW50OiAke3BhcmVudElkfWApO1xuICB9XG4gIFxuICAvLyBJZiB0aGlzIGlzIGEgZGlyZWN0IEFQSSByZXBseSwgaXQgbWlnaHQgYmUgc3RydWN0dXJlZCBkaWZmZXJlbnRseVxuICBpZiAoY29tbWVudC5zbmlwcGV0Py50eXBlID09PSAncmVwbHknICYmIGNvbW1lbnQuc25pcHBldD8ucGFyZW50SWQpIHtcbiAgICBwYXJlbnRJZCA9IGNvbW1lbnQuc25pcHBldC5wYXJlbnRJZDtcbiAgICBjb25zb2xlLmxvZyhgRm91bmQgcGFyZW50SWQgZnJvbSByZXBseSB0eXBlOiAke3BhcmVudElkfWApO1xuICB9XG4gIFxuICAvLyBMb2cgbWFwcGluZyBmb3IgZGVidWdnaW5nXG4gIGNvbnNvbGUubG9nKGBNYXBwaW5nIGNvbW1lbnQgJHtjb21tZW50LmlkfSwgcGFyZW50SWQ6ICR7cGFyZW50SWQgfHwgJ05PTkUgKHRvcC1sZXZlbCknfWApO1xuICBcbiAgLy8gRW5zdXJlIHdlIGhhdmUgcHJvcGVyIGFjY2VzcyB0byBhbGwgcmVxdWlyZWQgcHJvcGVydGllc1xuICBjb25zdCB0b3BMZXZlbFNuaXBwZXQgPSBjb21tZW50LnNuaXBwZXQ/LnRvcExldmVsQ29tbWVudD8uc25pcHBldDtcbiAgY29uc3QgZGlyZWN0U25pcHBldCA9IGNvbW1lbnQuc25pcHBldDtcbiAgXG4gIHJldHVybiB7XG4gICAgY29tbWVudF9pZDogY29tbWVudC5pZCxcbiAgICB2aWRlb19pZDogZGlyZWN0U25pcHBldD8udmlkZW9JZCxcbiAgICBhdXRob3JfbmFtZTogdG9wTGV2ZWxTbmlwcGV0Py5hdXRob3JEaXNwbGF5TmFtZSB8fCBkaXJlY3RTbmlwcGV0Py5hdXRob3JEaXNwbGF5TmFtZSxcbiAgICBhdXRob3JfcHJvZmlsZV91cmw6IHRvcExldmVsU25pcHBldD8uYXV0aG9yUHJvZmlsZUltYWdlVXJsIHx8IGRpcmVjdFNuaXBwZXQ/LmF1dGhvclByb2ZpbGVJbWFnZVVybCxcbiAgICB0ZXh0OiB0b3BMZXZlbFNuaXBwZXQ/LnRleHREaXNwbGF5IHx8IGRpcmVjdFNuaXBwZXQ/LnRleHREaXNwbGF5LFxuICAgIGxpa2VfY291bnQ6IHRvcExldmVsU25pcHBldD8ubGlrZUNvdW50IHx8IGRpcmVjdFNuaXBwZXQ/Lmxpa2VDb3VudCB8fCAwLFxuICAgIHB1Ymxpc2hlZF9hdDogdG9wTGV2ZWxTbmlwcGV0Py5wdWJsaXNoZWRBdCB8fCBkaXJlY3RTbmlwcGV0Py5wdWJsaXNoZWRBdCxcbiAgICBjaGFubmVsX2lkOiBjaGFubmVsSWQsXG4gICAgaXNfb3duZXJfY29tbWVudDogZmFsc2UsXG4gICAgcGFyZW50X2lkOiBwYXJlbnRJZCxcbiAgICB2aWRlb190aXRsZTogZGlyZWN0U25pcHBldD8udmlkZW9UaXRsZSB8fCAnJyxcbiAgfTtcbn1cblxuLy8gRW5oYW5jZWQgbWFwcGluZyBmdW5jdGlvbiB0aGF0IGhhbmRsZXMgYWxsIHBvc3NpYmxlIHByb3BlcnRpZXNcbmV4cG9ydCBmdW5jdGlvbiBtYXBEYkNvbW1lbnRUb0NvbW1lbnREYXRhKGRiQ29tbWVudDogUmVjb3JkPHN0cmluZywgYW55Pik6IENvbW1lbnREYXRhIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogZGJDb21tZW50LmNvbW1lbnRfaWQsXG4gICAgYXV0aG9yRGlzcGxheU5hbWU6IGRiQ29tbWVudC5hdXRob3JfbmFtZSB8fCAnVW5rbm93biBVc2VyJyxcbiAgICBhdXRob3JQcm9maWxlSW1hZ2VVcmw6IGRiQ29tbWVudC5hdXRob3JfcHJvZmlsZV91cmwgfHwgJ2h0dHBzOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIvP2Q9bXAnLFxuICAgIHRleHREaXNwbGF5OiBkZWNvZGVBbGxIdG1sRW50aXRpZXMoZGJDb21tZW50LnRleHQgfHwgJycpLFxuICAgIGxpa2VDb3VudDogZGJDb21tZW50Lmxpa2VfY291bnQgfHwgMCxcbiAgICBwdWJsaXNoZWRBdDogZGJDb21tZW50LnB1Ymxpc2hlZF9hdCxcbiAgICB1cGRhdGVkQXQ6IGRiQ29tbWVudC51cGRhdGVkX2F0IHx8IGRiQ29tbWVudC5wdWJsaXNoZWRfYXQsXG4gICAgdmlkZW9JZDogZGJDb21tZW50LnZpZGVvX2lkLFxuICAgIHZpZGVvVGl0bGU6IGRiQ29tbWVudC52aWRlb190aXRsZSB8fCAnJyxcbiAgICByZXBseUNvdW50OiBkYkNvbW1lbnQucmVwbHlfY291bnQgfHwgMCxcbiAgICBpc0hlYXJ0ZWRCeUNyZWF0b3I6IGZhbHNlLFxuICAgIGlzUGlubmVkOiBmYWxzZSxcbiAgICBwYXJlbnRJZDogZGJDb21tZW50LnBhcmVudF9pZCxcbiAgICByZXBsaWVzOiBbXSAvLyBXaWxsIGJlIHBvcHVsYXRlZCBzZXBhcmF0ZWx5IGlmIG5lZWRlZFxuICB9O1xufVxuXG4vLyBEZWJ1ZyBmdW5jdGlvbiB0byBpbnNwZWN0IHBhcmVudC1jaGlsZCByZWxhdGlvbnNoaXBzIGluIHRoZSBkYXRhYmFzZVxuZnVuY3Rpb24gbG9nQWxsUGFyZW50Q2hpbGRSZWxhdGlvbnNoaXBzKCkge1xuICByZXR1cm4gc3VwYWJhc2VcbiAgICAuZnJvbSgnY29tbWVudHMnKVxuICAgIC5zZWxlY3QoJ2NvbW1lbnRfaWQsIHBhcmVudF9pZCcpXG4gICAgLm5vdCgncGFyZW50X2lkJywgJ2lzJywgbnVsbClcbiAgICAubGltaXQoMjApXG4gICAgLnRoZW4oKHsgZGF0YSwgZXJyb3IgfSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gUEFSRU5ULUNISUxEIERFQlVHIC0gU2FtcGxlIGNvbW1lbnRzIHdpdGggcGFyZW50czonLCBkYXRhKTtcbiAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBpZiBhbnk6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSk7XG59XG5cbi8vIE1vZGlmaWVkIGdldENvbW1lbnRSZXBsaWVzIGZ1bmN0aW9uIHRvIGZpeCByZXBseSBsb29rdXBcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb21tZW50UmVwbGllcyhjb21tZW50SWQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIGdldENvbW1lbnRSZXBsaWVzIC0gTG9va2luZyBmb3IgcmVwbGllcyB0byBjb21tZW50SWQ6JywgY29tbWVudElkKTtcbiAgICBcbiAgICAvLyBGaXJzdCwgY2hlY2sgaWYgYW55IGNvbW1lbnRzIGluIHRoZSBkYXRhYmFzZSBoYXZlIHBhcmVudF9pZCBtYXRjaGluZyBvdXIgY29tbWVudElkXG4gICAgY29uc3QgeyBkYXRhOiByZXBseUNoZWNrLCBlcnJvcjogcmVwbHlDaGVja0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2NvbW1lbnRzJylcbiAgICAgIC5zZWxlY3QoJ2NvdW50KCopJylcbiAgICAgIC5lcSgncGFyZW50X2lkJywgY29tbWVudElkKVxuICAgICAgLnNpbmdsZSgpO1xuICAgICAgXG4gICAgY29uc29sZS5sb2coJ/Cfk4ogZ2V0Q29tbWVudFJlcGxpZXMgLSBSZXBseSBjaGVjayByZXN1bHQ6JywgcmVwbHlDaGVjayk7XG4gICAgXG4gICAgaWYgKHJlcGx5Q2hlY2tFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIFJlcGx5IGNoZWNrIGVycm9yOicsIHJlcGx5Q2hlY2tFcnJvcik7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIHRoZSBhY3R1YWwgY29tbWVudCB3ZSdyZSBsb29raW5nIGZvciByZXBsaWVzIHRvXG4gICAgY29uc3QgeyBkYXRhOiBwYXJlbnRDb21tZW50LCBlcnJvcjogcGFyZW50RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnY29tbWVudHMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2NvbW1lbnRfaWQnLCBjb21tZW50SWQpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgICBcbiAgICBpZiAocGFyZW50Q29tbWVudCkge1xuICAgICAgY29uc29sZS5sb2coJ+KchSBGb3VuZCBwYXJlbnQgY29tbWVudDonLCB7XG4gICAgICAgIGlkOiBwYXJlbnRDb21tZW50LmlkLFxuICAgICAgICBjb21tZW50X2lkOiBwYXJlbnRDb21tZW50LmNvbW1lbnRfaWQsXG4gICAgICAgIHZpZGVvX2lkOiBwYXJlbnRDb21tZW50LnZpZGVvX2lkLFxuICAgICAgICB0ZXh0OiBwYXJlbnRDb21tZW50LnRleHQ/LnN1YnN0cmluZygwLCA1MCkgKyAnLi4uJyB8fCAnJ1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gUGFyZW50IGNvbW1lbnQgbm90IGZvdW5kIGZvciBJRDonLCBjb21tZW50SWQpO1xuICAgIH1cbiAgICBcbiAgICAvLyBTZWFyY2ggZm9yIHJlcGxpZXMgZGlyZWN0bHkgXG4gICAgY29uc3QgeyBkYXRhOiByZXBsaWVzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdjb21tZW50cycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgncGFyZW50X2lkJywgY29tbWVudElkKSAvLyBUaGlzIGFzc3VtZXMgcGFyZW50X2lkIHJlZmVyZW5jZXMgY29tbWVudF9pZCBcbiAgICAgIC5vcmRlcigncHVibGlzaGVkX2F0JywgeyBhc2NlbmRpbmc6IHRydWUgfSk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZmV0Y2hpbmcgcmVwbGllczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGDwn5OKIEZvdW5kICR7cmVwbGllcz8ubGVuZ3RoIHx8IDB9IHJlcGxpZXMgZm9yIGNvbW1lbnQ6YCwgY29tbWVudElkKTtcbiAgICBcbiAgICBpZiAocmVwbGllcyAmJiByZXBsaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIFNhbXBsZSB0aGUgZmlyc3QgcmVwbHlcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIEZpcnN0IHJlcGx5IHNhbXBsZTonLCB7XG4gICAgICAgIGlkOiByZXBsaWVzWzBdLmlkLFxuICAgICAgICBjb21tZW50X2lkOiByZXBsaWVzWzBdLmNvbW1lbnRfaWQsXG4gICAgICAgIHBhcmVudF9pZDogcmVwbGllc1swXS5wYXJlbnRfaWQsXG4gICAgICAgIHZpZGVvX2lkOiByZXBsaWVzWzBdLnZpZGVvX2lkLFxuICAgICAgICB0ZXh0OiByZXBsaWVzWzBdLnRleHQ/LnN1YnN0cmluZygwLCA1MCkgKyAnLi4uJyB8fCAnJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIE1hcCB0byB0aGUgZXhwZWN0ZWQgZm9ybWF0XG4gICAgY29uc3QgcmVwbHlEYXRhID0gcmVwbGllcz8ubWFwKHJlcGx5ID0+IG1hcERiQ29tbWVudFRvQ29tbWVudERhdGEocmVwbHkpKSB8fCBbXTtcbiAgICBcbiAgICByZXR1cm4gcmVwbHlEYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBpbiBnZXRDb21tZW50UmVwbGllczonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8vIEdldCB2aWRlb3MgZm9yIGEgY2hhbm5lbFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENoYW5uZWxWaWRlb3MoY2hhbm5lbElkOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICAvLyBTdGVwIDE6IEdldCB0aGUgaW50ZXJuYWwgVVVJRCBmb3IgdGhpcyBZb3VUdWJlIGNoYW5uZWwgSURcbiAgICBjb25zdCB7IGRhdGE6IGNoYW5uZWwgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnY2hhbm5lbHMnKVxuICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgLmVxKCdjaGFubmVsX2lkJywgY2hhbm5lbElkKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmICghY2hhbm5lbCkge1xuICAgICAgY29uc29sZS5sb2coJ0NoYW5uZWwgbm90IGZvdW5kIHdpdGggSUQ6JywgY2hhbm5lbElkKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0ZvdW5kIGNoYW5uZWwsIGludGVybmFsIElEOicsIGNoYW5uZWwuaWQpO1xuICAgIFxuICAgIC8vIFN0ZXAgMjogVXNlIHRoZSBpbnRlcm5hbCBVVUlEIHRvIHF1ZXJ5IHZpZGVvc1xuICAgIGNvbnN0IHsgZGF0YTogdmlkZW9zLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd2aWRlb3MnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ2NoYW5uZWxfaWQnLCBjaGFubmVsLmlkKTsgIC8vIFVzaW5nIGludGVybmFsIFVVSUQgaW5zdGVhZCBvZiBZb3VUdWJlIGNoYW5uZWwgSURcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHZpZGVvczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgXG4gICAgaWYgKCF2aWRlb3MgfHwgdmlkZW9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBcbiAgICAvLyBNYXAgREIgdmlkZW9zIHRvIFZpZGVvRGF0YSBmb3JtYXRcbiAgICBjb25zdCB2aWRlb0RhdGE6IFZpZGVvRGF0YVtdID0gdmlkZW9zLm1hcCh2aWRlbyA9PiAoe1xuICAgICAgaWQ6IHZpZGVvLnZpZGVvX2lkLFxuICAgICAgdGl0bGU6IHZpZGVvLnRpdGxlIHx8ICdVbnRpdGxlZCBWaWRlbycsXG4gICAgICBkZXNjcmlwdGlvbjogdmlkZW8uZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICBwdWJsaXNoZWRBdDogdmlkZW8ucHVibGlzaGVkX2F0LFxuICAgICAgdGh1bWJuYWlsVXJsOiB2aWRlby50aHVtYm5haWxfdXJsIHx8ICcnLFxuICAgICAgY2hhbm5lbElkOiB2aWRlby5jaGFubmVsX2lkXG4gICAgfSkpO1xuICAgIFxuICAgIHJldHVybiB2aWRlb0RhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0Q2hhbm5lbFZpZGVvczonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8vIEFkZCB0aGlzIGZ1bmN0aW9uIHRvIGluc3BlY3QgYSBjb21tZW50IHJlY29yZFxuZnVuY3Rpb24gaW5zcGVjdENvbW1lbnQoY29tbWVudDogUmVjb3JkPHN0cmluZywgYW55Pikge1xuICBjb25zb2xlLmxvZygnQ29tbWVudCBzdHJ1Y3R1cmU6Jywge1xuICAgIGlkOiBjb21tZW50LmlkLFxuICAgIGNvbW1lbnRfaWQ6IGNvbW1lbnQuY29tbWVudF9pZCxcbiAgICB2aWRlb19pZDogY29tbWVudC52aWRlb19pZCxcbiAgICBwYXJlbnRfaWQ6IGNvbW1lbnQucGFyZW50X2lkLFxuICAgIGNoYW5uZWxfaWQ6IGNvbW1lbnQuY2hhbm5lbF9pZCxcbiAgICAvLyBBZGQgb3RoZXIgZmllbGRzIHlvdSBleHBlY3RcbiAgfSk7XG59XG5cbi8vIFVwZGF0ZSB0aGUgZ2V0Q29tbWVudFRocmVhZHMgZnVuY3Rpb24gd2l0aCBhZGRpdGlvbmFsIGRlYnVnZ2luZ1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbW1lbnRUaHJlYWRzKFxuICBjaGFubmVsSWQ6IHN0cmluZywgXG4gIHZpZGVvSWQ/OiBzdHJpbmcsIFxuICBwYWdlOiBudW1iZXIgPSAxLCBcbiAgcGVyUGFnZTogbnVtYmVyID0gMjBcbikge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SOIGdldENvbW1lbnRUaHJlYWRzIC0gSW5wdXRzOicsIHsgY2hhbm5lbElkLCB2aWRlb0lkLCBwYWdlLCBwZXJQYWdlIH0pO1xuXG4gICAgLy8gU3RlcCAxOiBHZXQgdGhlIGludGVybmFsIFVVSUQgZm9yIHRoaXMgWW91VHViZSBjaGFubmVsIElEXG4gICAgY29uc3QgeyBkYXRhOiBjaGFubmVsLCBlcnJvcjogY2hhbm5lbEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2NoYW5uZWxzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdjaGFubmVsX2lkJywgY2hhbm5lbElkKVxuICAgICAgLnNpbmdsZSgpO1xuICAgIFxuICAgIGlmIChjaGFubmVsRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBnZXRDb21tZW50VGhyZWFkcyAtIEVycm9yIGZpbmRpbmcgY2hhbm5lbDonLCBjaGFubmVsRXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIWNoYW5uZWwpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gZ2V0Q29tbWVudFRocmVhZHMgLSBDaGFubmVsIG5vdCBmb3VuZCB3aXRoIElEOicsIGNoYW5uZWxJZCk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCfinIUgZ2V0Q29tbWVudFRocmVhZHMgLSBGb3VuZCBjaGFubmVsOicsIHsgXG4gICAgICBpbnRlcm5hbF9pZDogY2hhbm5lbC5pZCwgXG4gICAgICBjaGFubmVsX2lkOiBjaGFubmVsLmNoYW5uZWxfaWQsXG4gICAgICB0aXRsZTogY2hhbm5lbC50aXRsZVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFN0ZXAgMjogVXNlIHRoZSBpbnRlcm5hbCBVVUlEIHRvIHF1ZXJ5IGNvbW1lbnRzXG4gICAgY29uc3Qgc3RhcnRJZHggPSAocGFnZSAtIDEpICogcGVyUGFnZTtcbiAgICBjb25zdCBlbmRJZHggPSBwYWdlICogcGVyUGFnZSAtIDE7XG4gICAgXG4gICAgY29uc29sZS5sb2coYPCflKIgZ2V0Q29tbWVudFRocmVhZHMgLSBSYW5nZTogJHtzdGFydElkeH0gdG8gJHtlbmRJZHh9YCk7XG4gICAgXG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdjb21tZW50cycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnY2hhbm5lbF9pZCcsIGNoYW5uZWwuaWQpXG4gICAgICAuaXMoJ3BhcmVudF9pZCcsIG51bGwpIC8vIE9ubHkgZ2V0IHRvcC1sZXZlbCBjb21tZW50c1xuICAgICAgLm9yZGVyKCdwdWJsaXNoZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAgIC5yYW5nZShzdGFydElkeCwgZW5kSWR4KTtcbiAgICBcbiAgICBpZiAodmlkZW9JZCkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgndmlkZW9faWQnLCB2aWRlb0lkKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgeyBkYXRhOiBjb21tZW50cywgZXJyb3I6IGNvbW1lbnRzRXJyb3IgfSA9IGF3YWl0IHF1ZXJ5O1xuICAgIFxuICAgIGlmIChjb21tZW50c0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgZ2V0Q29tbWVudFRocmVhZHMgLSBFcnJvciBmZXRjaGluZyBjb21tZW50czonLCBjb21tZW50c0Vycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coYPCfk4ogZ2V0Q29tbWVudFRocmVhZHMgLSBGb3VuZCAke2NvbW1lbnRzPy5sZW5ndGggfHwgMH0gY29tbWVudHNgKTtcbiAgICBcbiAgICBpZiAoIWNvbW1lbnRzIHx8IGNvbW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBcbiAgICAvLyBTYW1wbGUgdGhlIGZpcnN0IGNvbW1lbnQgdG8gZGVidWdcbiAgICBpZiAoY29tbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gZ2V0Q29tbWVudFRocmVhZHMgLSBGaXJzdCBjb21tZW50OicsIHtcbiAgICAgICAgaWQ6IGNvbW1lbnRzWzBdLmlkLFxuICAgICAgICBjb21tZW50X2lkOiBjb21tZW50c1swXS5jb21tZW50X2lkLFxuICAgICAgICBwYXJlbnRfaWQ6IGNvbW1lbnRzWzBdLnBhcmVudF9pZCxcbiAgICAgICAgY2hhbm5lbF9pZDogY29tbWVudHNbMF0uY2hhbm5lbF9pZFxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBlYWNoIGNvbW1lbnQsIGNvdW50IHJlcGxpZXMgYW5kIG1hcCB0byBDb21tZW50RGF0YSBmb3JtYXRcbiAgICBjb25zdCBjb21tZW50RGF0YSA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgY29tbWVudHMubWFwKGFzeW5jIChjb21tZW50KSA9PiB7XG4gICAgICAgIC8vIENvdW50IHJlcGxpZXMgZm9yIHRoaXMgY29tbWVudCBcbiAgICAgICAgY29uc3QgeyBjb3VudCB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbSgnY29tbWVudHMnKVxuICAgICAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pXG4gICAgICAgICAgLmVxKCdwYXJlbnRfaWQnLCBjb21tZW50LmNvbW1lbnRfaWQpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVwbHlDb3VudCA9IGNvdW50IHx8IDA7XG4gICAgICAgIFxuICAgICAgICAvLyBNYXAgREIgY29tbWVudCB0byBDb21tZW50RGF0YSBmb3JtYXQgd2l0aCByZXBseSBjb3VudFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLm1hcERiQ29tbWVudFRvQ29tbWVudERhdGEoY29tbWVudCksXG4gICAgICAgICAgcmVwbHlDb3VudFxuICAgICAgICB9O1xuICAgICAgfSlcbiAgICApO1xuICAgIFxuICAgIHJldHVybiBjb21tZW50RGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgZ2V0Q29tbWVudFRocmVhZHMgLSBVbmhhbmRsZWQgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQ29tbWVudFJlcGx5Q291bnRzKCkge1xuICBjb25zb2xlLmxvZygnVXBkYXRpbmcgcmVwbHkgY291bnRzIGZvciBhbGwgY29tbWVudHMuLi4nKTtcbiAgXG4gIHRyeSB7XG4gICAgLy8gRm9yIGVhY2ggY29tbWVudCB3aXRoIHJlcGxpZXMsIGNvdW50IHRoZW0gYW5kIHVwZGF0ZSB0aGUgcmVwbHlfY291bnRcbiAgICBjb25zdCB7IGRhdGE6IGNvbW1lbnRzIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2NvbW1lbnRzJylcbiAgICAgIC5zZWxlY3QoJ2NvbW1lbnRfaWQnKVxuICAgICAgLmlzKCdwYXJlbnRfaWQnLCBudWxsKTtcbiAgICBcbiAgICBpZiAoIWNvbW1lbnRzKSByZXR1cm47XG4gICAgXG4gICAgZm9yIChjb25zdCBjb21tZW50IG9mIGNvbW1lbnRzKSB7XG4gICAgICAvLyBDb3VudCB0aGUgcmVwbGllcyBmb3IgdGhpcyBjb21tZW50XG4gICAgICBjb25zdCB7IGNvdW50IH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnY29tbWVudHMnKVxuICAgICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxuICAgICAgICAuZXEoJ3BhcmVudF9pZCcsIGNvbW1lbnQuY29tbWVudF9pZCk7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgcmVwbHlfY291bnRcbiAgICAgIGlmIChjb3VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ2NvbW1lbnRzJylcbiAgICAgICAgICAudXBkYXRlKHsgcmVwbHlfY291bnQ6IGNvdW50IH0pXG4gICAgICAgICAgLmVxKCdjb21tZW50X2lkJywgY29tbWVudC5jb21tZW50X2lkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1JlcGx5IGNvdW50cyB1cGRhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHJlcGx5IGNvdW50czonLCBlcnJvcik7XG4gIH1cbn0gIl0sIm5hbWVzIjpbInN1cGFiYXNlIiwiZGVjb2RlQWxsSHRtbEVudGl0aWVzIiwic2VhcmNoRm9yQ2hhbm5lbCIsImNoYW5uZWxOYW1lIiwiYXBpS2V5IiwidXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVzcG9uc2UiLCJmZXRjaCIsImRhdGEiLCJqc29uIiwiaXRlbXMiLCJsZW5ndGgiLCJFcnJvciIsImlkIiwiY2hhbm5lbElkIiwiZmV0Y2hWaWRlb3NCeUNoYW5uZWwiLCJtYXhSZXN1bHRzIiwicGFnZVRva2VuIiwiZmV0Y2hBbGxWaWRlb3NCeUNoYW5uZWwiLCJhbGxWaWRlb3MiLCJuZXh0UGFnZVRva2VuIiwiY29uc29sZSIsImxvZyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImZldGNoQ29tbWVudHMiLCJ2aWRlb0lkIiwib2siLCJzdGF0dXNUZXh0IiwiZXJyb3IiLCJmZXRjaExhdGVzdENoYW5uZWxDb21tZW50cyIsIm1heFZpZGVvcyIsImluY2x1ZGVPbGRWaWRlb3MiLCJtYXhDb21tZW50cyIsImluY2x1ZGVSZXBsaWVzIiwidmlkZW9zUmVzcG9uc2UiLCJwcm9jZXNzZWRWaWRlb3MiLCJzbGljZSIsImFsbENvbW1lbnRzIiwiZmV0Y2hlZENvbW1lbnRDb3VudCIsInZpZGVvIiwid2FybiIsImNvbW1lbnRzUmVzcG9uc2UiLCJ2aWRlb0NvbW1lbnRzIiwiY29tbWVudFRocmVhZCIsInNuaXBwZXQiLCJ0b3BMZXZlbENvbW1lbnQiLCJwdXNoIiwidmlkZW9UaXRsZSIsInRpdGxlIiwiYXV0aG9yTmFtZSIsImF1dGhvckRpc3BsYXlOYW1lIiwiYXV0aG9yUHJvZmlsZVVybCIsImF1dGhvclByb2ZpbGVJbWFnZVVybCIsInRleHQiLCJ0ZXh0RGlzcGxheSIsImxpa2VDb3VudCIsInB1Ymxpc2hlZEF0IiwidXBkYXRlZEF0IiwidG90YWxSZXBseUNvdW50IiwicmVwbGllcyIsImNvbW1lbnRzIiwicmVwbHkiLCJwYXJlbnRJZCIsImdldENvbW1lbnRzRm9yVmlkZW8iLCJjb21tZW50Q291bnQiLCJjb21tZW50IiwicmVwbHlDb21tZW50IiwibWFwWW91VHViZUNvbW1lbnRUb0RiQ29tbWVudCIsInR5cGUiLCJ0b3BMZXZlbFNuaXBwZXQiLCJkaXJlY3RTbmlwcGV0IiwiY29tbWVudF9pZCIsInZpZGVvX2lkIiwiYXV0aG9yX25hbWUiLCJhdXRob3JfcHJvZmlsZV91cmwiLCJsaWtlX2NvdW50IiwicHVibGlzaGVkX2F0IiwiY2hhbm5lbF9pZCIsImlzX293bmVyX2NvbW1lbnQiLCJwYXJlbnRfaWQiLCJ2aWRlb190aXRsZSIsIm1hcERiQ29tbWVudFRvQ29tbWVudERhdGEiLCJkYkNvbW1lbnQiLCJ1cGRhdGVkX2F0IiwicmVwbHlDb3VudCIsInJlcGx5X2NvdW50IiwiaXNIZWFydGVkQnlDcmVhdG9yIiwiaXNQaW5uZWQiLCJsb2dBbGxQYXJlbnRDaGlsZFJlbGF0aW9uc2hpcHMiLCJmcm9tIiwic2VsZWN0Iiwibm90IiwibGltaXQiLCJ0aGVuIiwiZ2V0Q29tbWVudFJlcGxpZXMiLCJjb21tZW50SWQiLCJyZXBseUNoZWNrIiwicmVwbHlDaGVja0Vycm9yIiwiZXEiLCJzaW5nbGUiLCJwYXJlbnRDb21tZW50IiwicGFyZW50RXJyb3IiLCJzdWJzdHJpbmciLCJvcmRlciIsImFzY2VuZGluZyIsInJlcGx5RGF0YSIsIm1hcCIsImdldENoYW5uZWxWaWRlb3MiLCJjaGFubmVsIiwidmlkZW9zIiwidmlkZW9EYXRhIiwiZGVzY3JpcHRpb24iLCJ0aHVtYm5haWxVcmwiLCJ0aHVtYm5haWxfdXJsIiwiaW5zcGVjdENvbW1lbnQiLCJnZXRDb21tZW50VGhyZWFkcyIsInBhZ2UiLCJwZXJQYWdlIiwiY2hhbm5lbEVycm9yIiwiaW50ZXJuYWxfaWQiLCJzdGFydElkeCIsImVuZElkeCIsInF1ZXJ5IiwiaXMiLCJyYW5nZSIsImNvbW1lbnRzRXJyb3IiLCJjb21tZW50RGF0YSIsImFsbCIsImNvdW50IiwiaGVhZCIsInVwZGF0ZUNvbW1lbnRSZXBseUNvdW50cyIsInVuZGVmaW5lZCIsInVwZGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/youtube.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/he","vendor-chunks/tailwind-merge","vendor-chunks/clsx"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcomment-replies%2Froute&page=%2Fapi%2Fcomment-replies%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcomment-replies%2Froute.ts&appDir=%2FUsers%2Fbrandoncullum%2Fcommenter%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fbrandoncullum%2Fcommenter&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();